import*as r from"./map.js";import*as n from"../control/engine.js";const t=new Map([["ArrowUp","north"],["ArrowRight","east"],["ArrowDown","south"],["ArrowLeft","west"],["w","north"],["d","east"],["s","south"],["a","west"],["5","north"],["3","east"],["2","south"],["1","west"],["x","explore"]]),e=document.querySelector("#sidebar"),o=e.querySelector("#messages"),c=Array.from(e.querySelectorAll("#hp span")).slice(1,6),s=Array.from(e.querySelectorAll("#xp span")).slice(1,6);function l(e){e.classList.add("active")}function u(e){e.classList.remove("active")}function a(e,t,o){l(o.target),setTimeout(()=>u(o.target),200),n.floor.move(n.hero,e,t),r.update()}function i(e){e=t.get(e.key);e&&document.querySelector("#"+e).click()}function d(e){e=e.target;n.explore?(u(e),n.autoexplore(!1)):(l(e),n.autoexplore())}function m(t,o){for(let e=1;e<=5;e++)e<=o?t[e-1].classList.add("full"):t[e-1].classList.remove("full")}function p(){var e=n.hero;m(c,5-e.wounds),m(s,e.xp)}function f(){document.querySelector("#north").onclick=e=>a(0,1,e),document.querySelector("#east").onclick=e=>a(1,0,e),document.querySelector("#south").onclick=e=>a(0,-1,e),document.querySelector("#west").onclick=e=>a(-1,0,e),document.querySelector("#explore").onclick=e=>d(e),window.addEventListener("keyup",i),p()}function w(e){var t=document.createElement("p");return t.textContent=e,o.append(t),o.scrollTo(0,o.scrollHeight),t}function y(e){w(e).classList.add("warning")}export{p as update,f as setup,w as log,y as warn};