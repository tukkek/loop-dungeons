import*as o from"../model/point.js";import*as r from"../control/engine.js";const t=32,l=document.querySelector("#map"),n=document.querySelector("template#cell").content.children[0];var a=Math.floor(983.7/t),i=Math.floor(.8*768/t),c=Array.from(new Array(a),()=>new Array(i));class s{constructor(o,t,e){this.x=o,this.y=t,this.view=n.cloneNode(!0),this.wall=e.wall(o,t)}get location(){return new o.Point(this.x,this.y)}draw(){var o=r.floor.actors.find(o=>o.location.equals(this.location));let t="";this.wall?t="#":o?o==r.hero?t="@":"Chest"==o.constructor.name?t="$":"Up"==o.constructor.name?t=">":"Down"==o.constructor.name&&(t="<"):t="";this.view.textContent=t,this.view.style.color={"#":"grey",$:"yellow"}[t]||"white"}}function e(){for(var o of l.querySelectorAll("div.cell"))o.remove();for(let t=i-1;0<=t;t--)for(let o=0;o<a;o++){var e=new s(o,t,r.floor);(c[o][t]=e).draw(),l.appendChild(e.view)}l.style["grid-template-columns"]=`repeat(${a},32px)`}function f(){for(var o of c)for(var t of o)t.draw()}export{a as width,i as height,e as setup,f as update};