import*as r from"../control/engine.js";import*as n from"./sidebar.js";const l=document.querySelectorAll("#hotbar .item"),o=document.querySelector("#gear"),t=[0,20,30,50,70,80],a=["","I","II","III","IV","V"],c=document.querySelector("#hotbar template#numeral").content.children[0];var i=!1;function u(e){o.classList.remove("hidden"),o.querySelector(".name").textContent=e.name,o.querySelector(".level").textContent=e.level,o.querySelector(".chance").textContent=t[e.level],o.querySelector(".effect").textContent=e.effect}function d(){o.classList.add("hidden")}function m(){for(var e of l)n.deactivate(e);i=!1}function s(e){e.cooling||(i==e?m():(m(),i=e,n.activate(l[e.slot])))}function e(){i&&i.cooling&&(i=!1);var e,t=r.hero.gear;for(let e=0;e<t.length;e++){var n=l[e];let o=t[e];n.style["background-image"]=`url('assets/${o.image}')`,n.onmouseenter=()=>u(o),n.onmouseleave=()=>d(),n.onclick=e=>s(o),n.numeral.textContent=a[o.level];n=n.classList;o.cooling?(m(),n.add("cooling")):n.remove("cooling"),o.canupgrade?n.add("upgrade"):n.remove("upgrade")}i&&!i.cooling||(e=s(t.find(e=>!e.cooling)))&&s(e)}function g(e){var o,t=r.hero,e=t.gear[e.slot];e.canupgrade?(o=`Upgrade ${e.name.toLowerCase()} for ${e.level} XP?`,window.confirm(o)&&(t.xp-=e.level,e.level+=1,r.turn())):n.warn("Needs more XP to upgrade...")}function f(){for(let o=0;o<l.length;o++){let e=l[o];e.numeral=c.cloneNode(!0),e.slot=o,e.numeral.onclick=()=>g(e),e.appendChild(e.numeral)}e()}export{i as active,s as activate,e as update,f as setup};