import*as r from"../control/engine.js";import*as t from"../control/mechanic/combat.js";import*as n from"./sidebar.js";const l=document.querySelectorAll("#hotbar .item"),o=document.querySelector("#gear"),a=[0,10,20,30,40,50],c=["","I","II","III","IV","V"],i=document.querySelector("#hotbar template#numeral").content.children[0];var u=!1;function s(e){o.classList.remove("hidden"),o.querySelector(".name").textContent=e.name,o.querySelector(".level").textContent=e.level,o.querySelector(".chance").textContent=a[e.level],o.querySelector(".effect").textContent=e.effect}function d(){o.classList.add("hidden")}function m(){u&&(n.deactivate(l[u.slot]),u=!1)}function g(e){e.cooling||u!=e&&(m(),u=e,n.activate(l[e.slot]))}function e(){u&&!u.cooling||(e=t.autofight(!1))&&g(e);var e,o=r.hero.gear;for(let e=0;e<o.length;e++){var n=l[e];let t=o[e];n.style["background-image"]=`url('assets/${t.image}')`,n.onmouseenter=()=>s(t),n.onmouseleave=()=>d(),n.onclick=e=>g(t),n.numeral.textContent=c[t.level];n=n.classList;t.cooling?n.add("cooling"):n.remove("cooling"),t.canupgrade?n.add("upgrade"):n.remove("upgrade")}}function f(e){var t,o=r.hero,e=o.gear[e.slot];e.canupgrade?(t=`Upgrade ${e.name.toLowerCase()} for ${e.level} XP?`,window.confirm(t)&&(o.xp-=e.level,e.level+=1,r.turn())):n.warn("Needs more XP to upgrade...")}function v(){l[0].parentNode.classList.remove("hidden");for(let t=0;t<l.length;t++){let e=l[t];e.numeral=i.cloneNode(!0),e.slot=t,e.numeral.onclick=()=>f(e),e.appendChild(e.numeral)}e()}export{u as active,m as deactivate,g as activate,e as update,v as setup};