import*as t from"./unit.js";import*as r from"../../control/engine.js";import*as e from"../../control/loot.js";import*as s from"../../view/sidebar.js";import*as o from"../../control/driver.js";import*as i from"../gear/gear.js";class a extends t.Unit{constructor(){super("stages/purple/Purple_chest 1.png"),this.height=64,this.open=!1,this.loot=e.generate()}get content(){return this.loot.toString().toLowerCase()}get hasgear(){return this.loot instanceof i.Gear}activate(){o.reset(!this.open&&this.loot),s.log(`You see: ${this.content}.`),this.open||(this.open=!0),this.hasgear||this.grab()}toString(){return`Chest (${this.content})`}grab(){var t,e=r.hero,o=this.loot;this.hasgear?(t=e.gear[o.slot],e.equip(o),s.log(`You take: ${o}.`),this.loot=t,s.log(`You leave: ${t}.`)):e.grab(o)&&(s.log(`You take: ${o}.`),this.loot=!1,this.remove()),r.turn()}redraw(){return this.open&&"stages/purple/Purple_chest 2.png"}value(){return this.open?0:o.value.chest}}export{a as Chest};