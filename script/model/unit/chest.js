import*as t from"./unit.js";import*as r from"../../control/engine.js";import*as o from"../../control/rpg.js";import*as e from"../../control/loot.js";import*as s from"../../view/sidebar.js";import*as i from"../../control/driver.js";class n extends t.Unit{constructor(){super("stages/purple/Purple_chest 1.png"),this.height=64,this.open=!1,this.gear=!1,this.gold=0;var t=r.floor.challenge();o.chancein(2)?this.gear=e.generate(t):this.gold=t}get content(){return this.gear?this.gear.toString():`+${this.gold} cure potion`}activate(){s.log(`You see: ${this.content}.`),this.open||(this.gear?this.open=!0:this.loot())}toString(){return"Chest "+this.content}loot(){for(var t=r.hero;0<this.gold&&0<t.wounds;this.gold--)--t.wounds;this.remove()}swap(){var t=this.gear,o=r.hero,e=o.gear[t.slot];o.equip(t),this.gear=e,s.log(`You take: ${t}.`),s.log(`You leave: ${e}.`),r.turn()}redraw(){return this.open&&"stages/purple/Purple_chest 2.png"}value(){return this.open?0:r.hero.wounds+1}}export{n as Chest};